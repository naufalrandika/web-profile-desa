"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useFormat = void 0;
const react_1 = require("react");
const x6_plugin_export_1 = require("@antv/x6-plugin-export");
const graph_1 = require("../graph");
const useFormat = (formatOptions) => {
    const [options, setOptions] = (0, react_1.useState)();
    const graph = (0, graph_1.useGraph)();
    const initFormat = (0, react_1.useCallback)(() => {
        if (graph) {
            const format = new x6_plugin_export_1.Export();
            format.init(graph);
            graph.use(format);
            return format;
        }
    }, [graph]);
    (0, react_1.useEffect)(() => {
        if (formatOptions) {
            setOptions(formatOptions);
        }
    }, [formatOptions]);
    return (0, react_1.useMemo)(() => {
        if (graph) {
            const graphFormat = graph.getPlugin(x6_plugin_export_1.Export.name) || initFormat();
            return (graphFormat && {
                exportPng: (fileName) => graphFormat.exportPNG(fileName, options),
                exportJPEG: (fileName) => graphFormat.exportJPEG(fileName, options),
            });
        }
    }, [graph, options, initFormat]);
};
exports.useFormat = useFormat;
//# sourceMappingURL=index.js.map