import React, { useRef, useEffect, useCallback } from 'react';
import { MiniMap } from '@antv/x6-plugin-minimap';
import { useGraph } from '../../hooks/graph';
export const Minimap = (props) => {
    const graph = useGraph();
    const mapRef = useRef(null);
    const initMinimap = useCallback(() => {
        if (mapRef.current && graph) {
            const options = Object.assign(Object.assign({}, props), { container: mapRef.current });
            const minimap = graph.getPlugin(MiniMap.name);
            if (minimap) {
                minimap.dispose();
                // TODO: add setOption function
                // minimap.setOptions(options)
                minimap.init(graph);
            }
            else {
                const minimap = new MiniMap(options);
                minimap.init(graph);
                graph.use(minimap);
            }
        }
    }, [mapRef, props, graph]);
    useEffect(() => {
        if (graph) {
            initMinimap();
        }
    }, [mapRef, graph]);
    return React.createElement("div", { ref: mapRef });
};
//# sourceMappingURL=index.js.map